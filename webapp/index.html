<html>

<head>
    <style data-merge-styles="true"></style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <title>새해 목표</title>
</head>

<body class="vh-100" background="main_bg.jpg"
    style="background-size: auto 100vh; background-color: #caf2ff; background-repeat: no-repeat; background-position: right;" id="body">
    <div class="vh-100" style="display: inline-flex;" id="main">
        <div class="w-100" style="opacity: 0.95; margin: auto; padding-left: 5vw; padding-right: 5vw;">
            <div class="jumbotron jumbotron-fluid" style="background-color: rgba(255, 255, 255, 0.2);">
                <div class="container">
                    <h1 class="display-4">Happy New Year!</h1>
                    <p>아주 많은 일이 일어난 2021년이 지나고, 2022년 새해가 떴습니다.
                        <br>새해니까 목표를 하나 세우는것도 나쁘지 않겠죠? 지금 이 곳에 여러분의 새해 목표를 적어주세요!
                        <br>비록 당장은 달성하기 힘든 목표겠지만 열심히 노력한다면 이뤄낼 수 있겠죠?
                        <br>이곳에 적은 여러분의 목표를 1년뒤 2023년 1월 1일에는 과연 이뤄냈을까요?
                    </p>
                </div>
            </div>

            <div class="alert alert-danger" role="alert">
                여러분이 적은 목표는 서버에 암호화되어 저장됩니다. 비밀번호 없이는 절대 확인 할 수 없으니 안심하고 적으셔도 됩니다.
            </div>
            <div class="input-group mb-3 ">
                <div class="input-group-prepend">
                    <span class="input-group-text h-100" id="email-label">이메일</span>
                </div>
                <input type="email" class="form-control" placeholder="example@example.com" aria-label="email"
                    aria-describedby="email-label" id="email">
                <div class="input-group-prepend">
                    <span class="input-group-text h-100" id="name-label">이름</span>
                </div>
                <input type="text" class="form-control" placeholder="홍길동" aria-label="name"
                    aria-describedby="name-label" id="name" spellcheck="false" data-ms-editor="true">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text h-100" id="goalText-label">목표(0)</span>
                </div>
                <textarea class="form-control" placeholder="새해에는 꼭 다이어트를 할거야!" aria-label="goal"
                    aria-describedby="goalText-label" rows="10" spellcheck="false" data-ms-editor="true" id="goalText" oninput="charLengthCheck();"></textarea>
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text h-100" id="pw-label">비밀번호</span>
                </div>
                <input type="password" class="form-control" placeholder="pw" aria-label="pw" aria-describedby="pw-label"
                    id="pw" spellcheck="false" data-ms-editor="true">
            </div>
            <div class="input-group mb-3">
                <button type="button" class="btn btn-primary w-100" onclick="clickSubmit();">전송</button>
            </div>
        </div>
    </div>
    <script>
        window.onresize =  resize;
        function resize (){
            let body = document.getElementById('body');
            let main = document.getElementById('main');
            let windowH = window.innerHeight;
            let windowW = window.innerWidth;
            if(windowW/windowH < 1.92) {
                body.style.backgroundPosition = "center";
                main.style.display="flex"
            }else{
                body.style.backgroundPosition = "right";
                main.style.display="inline-flex"
            }
        }
        function charLengthCheck(e){
            let label = document.getElementById('goalText-label');
            let length = document.getElementById('goalText').value.length;
            console.log(length);
            label.innerText="목표("+length+"/200)"
        }
        window.addEventListener("keydown",charLengthCheck);
        charLengthCheck();
        resize();
        async function clickSubmit() {
            let email = document.getElementById('email').value;
            if (!email.includes("@")) {
                alert("이메일에는 @가 포함되어야 합니다.");
                return;
            }
            let name = document.getElementById('name').value;
            let goalText = document.getElementById('goalText').value;
            let pw = document.getElementById('pw').value;
            if (pw.length != 8) {
                alert("비밀번호는 8글자여야 합니다.");
                return;
            }
            let json = {
                email: email,
                name: name,
                goalText: goalText,
                pw: pw
            };
            let response = await fetch('./goals/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(json)
            });
            if(response.status!=200){
                await alert("이미 등록된 이메일입니다.");
                return;
            }
            let result = await response.json();
            if(result)
           	console.log(JSON.stringify(result));
            if(await JSON.stringify(result).includes("email")){
                await alert("성공");
            }else{
                await alert("실패");
            }
        
        }
    </script>

</body>
<editor-card style="position:absolute;top:0px;left:0px;z-index:auto;display: block !important">
    <div dir="ltr" style="all: initial;">
        <div
            style="color: initial; font: initial; font-feature-settings: initial; font-kerning: initial; font-optical-sizing: initial; font-variation-settings: initial; forced-color-adjust: initial; text-orientation: initial; text-rendering: initial; -webkit-font-smoothing: initial; -webkit-locale: initial; -webkit-text-orientation: initial; -webkit-writing-mode: initial; writing-mode: initial; zoom: initial; accent-color: initial; place-content: initial; place-items: initial; place-self: initial; alignment-baseline: initial; animation: initial; app-region: initial; appearance: initial; aspect-ratio: initial; backdrop-filter: initial; backface-visibility: initial; background: initial; background-blend-mode: initial; baseline-shift: initial; block-size: initial; border-block: initial; border: initial; border-radius: initial; border-collapse: initial; border-end-end-radius: initial; border-end-start-radius: initial; border-inline: initial; border-start-end-radius: initial; border-start-start-radius: initial; inset: initial; box-shadow: initial; box-sizing: initial; break-after: initial; break-before: initial; break-inside: initial; buffered-rendering: initial; caption-side: initial; caret-color: initial; clear: initial; clip: initial; clip-path: initial; clip-rule: initial; color-interpolation: initial; color-interpolation-filters: initial; color-rendering: initial; color-scheme: initial; columns: initial; column-fill: initial; gap: initial; column-rule: initial; column-span: initial; contain: initial; contain-intrinsic-block-size: initial; contain-intrinsic-size: initial; contain-intrinsic-inline-size: initial; content: initial; content-visibility: initial; counter-increment: initial; counter-reset: initial; counter-set: initial; cursor: initial; cx: initial; cy: initial; d: initial; display: initial; dominant-baseline: initial; empty-cells: initial; fill: initial; fill-opacity: initial; fill-rule: initial; filter: initial; flex: initial; flex-flow: initial; float: initial; flood-color: initial; flood-opacity: initial; grid: initial; grid-area: initial; height: initial; hyphens: initial; image-orientation: initial; image-rendering: initial; inline-size: initial; inset-block: initial; inset-inline: initial; isolation: initial; letter-spacing: initial; lighting-color: initial; line-break: initial; list-style: initial; margin-block: initial; margin: initial; margin-inline: initial; marker: initial; mask: initial; mask-type: initial; max-block-size: initial; max-height: initial; max-inline-size: initial; max-width: initial; min-block-size: initial; min-height: initial; min-inline-size: initial; min-width: initial; mix-blend-mode: initial; object-fit: initial; object-position: initial; offset: initial; opacity: initial; order: initial; origin-trial-test-property: initial; orphans: initial; outline: initial; outline-offset: initial; overflow-anchor: initial; overflow-clip-margin: initial; overflow-wrap: initial; overflow: initial; overscroll-behavior-block: initial; overscroll-behavior-inline: initial; overscroll-behavior: initial; padding-block: initial; padding: initial; padding-inline: initial; page: initial; page-orientation: initial; paint-order: initial; perspective: initial; perspective-origin: initial; pointer-events: initial; position: absolute; quotes: initial; r: initial; resize: initial; ruby-position: initial; rx: initial; ry: initial; scroll-behavior: initial; scroll-margin-block: initial; scroll-margin: initial; scroll-margin-inline: initial; scroll-padding-block: initial; scroll-padding: initial; scroll-padding-inline: initial; scroll-snap-align: initial; scroll-snap-stop: initial; scroll-snap-type: initial; scrollbar-gutter: initial; shape-image-threshold: initial; shape-margin: initial; shape-outside: initial; shape-rendering: initial; size: initial; speak: initial; stop-color: initial; stop-opacity: initial; stroke: initial; stroke-dasharray: initial; stroke-dashoffset: initial; stroke-linecap: initial; stroke-linejoin: initial; stroke-miterlimit: initial; stroke-opacity: initial; stroke-width: initial; tab-size: initial; table-layout: initial; text-align: initial; text-align-last: initial; text-anchor: initial; text-combine-upright: initial; text-decoration: initial; text-decoration-skip-ink: initial; text-indent: initial; text-overflow: initial; text-shadow: initial; text-size-adjust: initial; text-transform: initial; text-underline-offset: initial; text-underline-position: initial; touch-action: initial; transform: initial; transform-box: initial; transform-origin: initial; transform-style: initial; transition: initial; user-select: initial; vector-effect: initial; vertical-align: initial; visibility: initial; border-spacing: initial; -webkit-border-image: initial; -webkit-box-align: initial; -webkit-box-decoration-break: initial; -webkit-box-direction: initial; -webkit-box-flex: initial; -webkit-box-ordinal-group: initial; -webkit-box-orient: initial; -webkit-box-pack: initial; -webkit-box-reflect: initial; -webkit-highlight: initial; -webkit-hyphenate-character: initial; -webkit-line-break: initial; -webkit-line-clamp: initial; -webkit-mask-box-image: initial; -webkit-mask: initial; -webkit-mask-composite: initial; -webkit-perspective-origin-x: initial; -webkit-perspective-origin-y: initial; -webkit-print-color-adjust: initial; -webkit-rtl-ordering: initial; -webkit-ruby-position: initial; -webkit-tap-highlight-color: initial; -webkit-text-combine: initial; -webkit-text-decorations-in-effect: initial; -webkit-text-emphasis: initial; -webkit-text-emphasis-position: initial; -webkit-text-fill-color: initial; -webkit-text-security: initial; -webkit-text-stroke: initial; -webkit-transform-origin-x: initial; -webkit-transform-origin-y: initial; -webkit-transform-origin-z: initial; -webkit-user-drag: initial; -webkit-user-modify: initial; white-space: initial; widows: initial; width: initial; will-change: initial; word-break: initial; word-spacing: initial; x: initial; y: initial; z-index: 2147483647;">
            <link rel="stylesheet" href="chrome-extension://gpaiobkfhnonedkhhfjpmhdalgeoebfa/fonts/fabric-icons.css">
            <div style="all: initial;"></div>
        </div>
    </div>
</editor-card>

</html>